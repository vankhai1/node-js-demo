<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link rel="stylesheet" href="/css/nav.css">
<nav class="navbar fixed-top navbar-expand-md flex-nowrap navbar-new-top">
            <a href="/home" class="navbar-brand"><img src="#" alt=""/>CRM</a>
            
            <ul class="nav navbar-nav mr-auto">
               
                <li class="nav-iteem">
                    <a href="/trangchu" class="nav-link px-2">Trang Chủ</a>
                </li>
                <li class="nav-iteem">
                    <a   href="/khachhangtn" class="nav-link px-2">Chào Hàng</a>
                </li>
                <li class="nav-iteem">
                    <a   href="/lhkhr" class="nav-link px-2">Liên Hệ</a>
                </li>
                <li class="nav-iteem">
                    <a   href="/nhiemvu" class="nav-link px-2">Công Việc</a>
                </li>
                <li class="nav-iteem">
                    <a   href="/taikhoan" class="nav-link px-2">Tài Khoản</a>
                </li>
                <li class="nav-iteem">
                    <a   href="/nhanvien" class="nav-link px-2">Nhân Viên</a>
                </li>
                <li  class="nav-iteem">
                    <a   href="/lhkh" class="nav-link px-2">Chức Vụ</a>
                </li>
            </ul>
            <div class="userlogin">
            <ul class="navbar-nav flex-row">
             <li class="nav-item" *ngIf="!isLoggedIn">
                <a href="/resigter" class="nav-link px-2">Register</a>
            </li>
            <li class="nav-item" *ngIf="!isLoggedIn">
                <a href="/login" class="nav-link px-2">Login</a>
            </li>
            <li class="nav-item" *ngIf="isLoggedIn">
                <a href="#" class="nav-link px-2" (click)="logout()">Logout</a>
            </li>        
            </ul>  
        </div>
        </nav>
           <script>
    const token = localStorage.getItem('token');
    
    if (token) {
        // ẩn nút login và register, hiện nút logout
        document.querySelector('.nav-item:nth-child(1)').style.display = 'none'; 
        document.querySelector('.nav-item:nth-child(2)').style.display = 'none'; 
        document.querySelector('.nav-item:nth-child(3)').style.display = 'block'; 
    } else {
        // ẩn nút logout, hiện nút login và register
        document.querySelector('.nav-item:nth-child(1)').style.display = 'block'; 
        document.querySelector('.nav-item:nth-child(2)').style.display = 'block'; 
        document.querySelector('.nav-item:nth-child(3)').style.display = 'none'; 
        
        // chuyển đến trang login
        document.querySelector('.nav-item:nth-child(2) a').addEventListener('click', function(e) {
            e.preventDefault(); 
            window.location.href = '/login';
        });
        
        // chuyển đến trang register
        document.querySelector('.nav-item:nth-child(1) a').addEventListener('click', function(e) {
            e.preventDefault(); 
            window.location.href = '/register';
        });
    }
    
       // xử lý khi người dùng đăng xuất
        document.querySelector('.nav-item:nth-child(3) a').addEventListener('click', function(e) {
            e.preventDefault(); 
            localStorage.removeItem('token');
            window.location.href = '/login';
        });
        if (!token) {
        const links = document.querySelectorAll('.navbar-nav a');
            links.forEach(link => {
            link.addEventListener('click', e => {
            // Ngăn chặn hành động mặc định của thẻ <a>
            e.preventDefault();

            // Chuyển hướng đến trang đăng nhập hoặc đăng ký tương ứng
            if (link.getAttribute('href') === '/login' || link.getAttribute('href') === '/resigter') {
                window.location.href = link.getAttribute('href');
            }
            });
        });
        }
</script>